import{a as U}from"./chunk-7FW2O5MM.js";import{a as L,d as N}from"./chunk-TIEYRJS2.js";import{$a as j,Ab as v,Gb as K,Jb as W,Ma as h,Na as _,Sa as k,T,Xb as B,Y as M,_a as V,aa as E,eb as y,fb as C,gb as S,hb as c,ia as p,ib as l,ic as Q,j as P,ja as f,nb as I,ob as x,pb as b,rc as R,ta as O,tc as H,ub as D,vb as A,wb as $,xb as w,yb as m,zb as F}from"./chunk-TKQFSGRA.js";var Z=(()=>{let r=class r{constructor(e){this.ngZone=e,this.subject=new P}connect(e){this.eventSource=new EventSource(e),this.eventSource.onmessage=t=>{this.ngZone.run(()=>{this.subject.next(t.data)})},this.eventSource.onerror=t=>{console.error("EventSource error:",t),this.subject.error(t)},this.eventSource.onopen=()=>{console.log("EventSource connected")}}disconnect(){this.eventSource.close()}get messages$(){return this.subject.asObservable()}};r.\u0275fac=function(t){return new(t||r)(M(k))},r.\u0275prov=T({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();var z=["cli"],G=(a,r)=>({"font-monospace text-white-50":a,"fw-bold text-danger":r});function J(a,r){if(a&1&&(c(0,"pre",17),m(1),l()),a&2){let d=r.$implicit,e=b().$implicit;j("ngClass",W(3,G,e.mode=="result",e.mode=="error")),V("mode",e.mode),h(),v("            ",d,`
          `)}}function X(a,r){if(a&1){let d=I();c(0,"details",11,1)(2,"summary",12)(3,"span")(4,"span",13),m(5,"@"),l(),c(6,"span",14),m(7),l(),c(8,"span",15),m(9,">"),l()(),c(10,"span"),m(11),l(),c(12,"span",16),x("click",function(t){let n=p(d),i=n.$implicit,o=n.$index,s=b(),u=w(14);return t.preventDefault(),u.value=i.command,f(s.curKeyIndex=o)}),m(13," \u2B94 "),l()(),C(14,J,2,6,"pre",17,y),l()}if(a&2){let d=r.$implicit,e=b();h(7),v("",d.cwd,"/"),h(4),v(" ",d.command," "),h(3),S(e.printValue(d.value))}}var me=(()=>{let r=class r{onSubmit(e){e.preventDefault();let n=e.target.querySelector("input");this.fetchData(n.value,i=>{if(n.value="",i.command.includes("cd ")){let o=[";","&","|","{","(","#","@","$","!",","],s=new RegExp(`[${o.join("")}]`),u=i.value;if(!s.test(u)){this.cwd=u;return}}this.terminal.push(i),this.curKeyIndex=this.terminal.length})}onKeydown(e){let t=e.key.toLowerCase(),n=["arrowup","arrowdown"],i=n.find(g=>g==t);if(!i)return;let o=this.curKeyIndex+(i==n[0]?-1:1);o<0?o=0:o>this.terminal.length-1&&(o=this.terminal.length),this.curKeyIndex=o;let s=e.target,u=this.terminal[o];s.value=u?u.command:""}reverseTerminal(){let e=[],t=this.terminal.map(n=>n.index);return t=[...new Set(t)],t.forEach(n=>{let i=this.terminal.find(o=>o.index==n);e.unshift(i)}),e}printValue(e){return typeof e=="string"?[e]:e}fetchData(e,t){if(!H(this.platformId))return;let n={type:"exec",cwd:this.cwd,cmd:e},i={index:this.terminal.length,type:"exec",cwd:this.cwd,command:e},s=(B()?"http://localhost:4000":"")+"/api/cmd";this.http.post(s,n).subscribe(u=>{this.isPWA=!0,i.mode=u.mode,i.value=u.result.trim().split(`
`).map(g=>g=g.trim()),t(i)})}init(){let t=[{cmd:"uname -a",title:"kernel name, hostname, OS release, version, and machine architecture."},{cmd:"lsb_release -a",title:"Linux Distribution"},{cmd:"lscpu",title:"CPU Info"},{cmd:"free -h",title:"Memory Usage."},{cmd:"df -h",title:"Disk space usage."}].map(n=>n.cmd).join(";");this.fetchData(t,n=>{this.terminal.push({index:0,type:"execSync",command:"Current System Information",mode:"result",value:n.value})})}constructor(e,t,n,i){this.platformId=e,this.http=t,this.swPush=n,this.eventSource=i,this.isPWA=!1,this.terminal=[],this.curKeyIndex=0}ngOnInit(){this.isPWA=this.swPush.isEnabled,this.isPWA||this.terminal.push({index:0,command:"",type:"execSync",mode:"error",cwd:"err-drive-not-found:",value:["\u2620\u2620\u2620","No system had been found!","","\u{1FAE0}","\u{1FAE0}\u{1FAE0}","\u{1FAE0}\u{1FAE0}\u{1FAE0}","\u{1FAE0}\u{1FAE0}\u{1FAE0}\u{1FAE0}","\u{1FAE0}\u{1FAE0}\u{1FAE0}\u{1FAE0}\u{1FAE0}","","This app need to be running as a standalone PWA.","  With some of few options:","  - You can ask the permission to the generous author of this app.","  - Or you can hire his services for your task,","  - Or maybe you can share some \u2615 to the dev (cheers),","","because he is jobless right now.","a genius whose being stranded in the culture of non-tech.","","oh my, poor him...","","","","So, sorry for the inconvenience but,","...","Relax, you're not been HACKED!","","","I ain't a type of hackey-dacky person bruh,","chill...","","- with love -","\u{1F48B}\u{1F48B}\u{1F48B}"]}),this.eventSource.connect("/your-sse-endpoint"),this.eventSource.messages$.subscribe(e=>{console.log("message from event source:",e)}),this.fetchData("pwd",e=>{this.cwd=e.value,this.init()})}ngAfterViewInit(){this.cliInput.nativeElement.focus()}};r.\u0275fac=function(t){return new(t||r)(_(O),_(L),_(U),_(Z))},r.\u0275cmp=E({type:r,selectors:[["app-terminal2"]],viewQuery:function(t,n){if(t&1&&D(z,5),t&2){let i;A(i=$())&&(n.cliInput=i.first)}},standalone:!0,features:[K],decls:18,vars:1,consts:[["cli",""],["det",""],[1,"vh-100","vw-100","bg-black","text-light","p-3","overflow-hidden"],[1,"d-flex","text-nowrap"],[1,"text-danger","fw-bolder"],[1,"text-warning"],["for","cli",1,"text-info","fw-bolder"],[1,"w-100",3,"submit"],["type","button","title","list of commands",1,"bg-transparent","text-light","border-0"],["id","cli","name","cli","title","cli","autocomplete","off","type","text","placeholder","your command..",1,"bg-transparent","ps-1","w-fill","text-light",3,"focus","blur","keydown"],[1,"h-fill","mt-2","mb-4","overflow-auto","p-3","terminal"],["open","",1,"my-3"],["mode","command",1,"text-bg-dark","mb-2"],[1,"ps-1","text-danger"],[1,"ps-1","text-warning"],[1,"ps-1","text-info"],["title","reuse cli code",1,"float-end","px-2",3,"click"],[1,"value","mb-1","text-wrap",3,"ngClass"]],template:function(t,n){if(t&1){let i=I();c(0,"main",2)(1,"section")(2,"div",3)(3,"span")(4,"span",4),m(5,"@ "),l(),c(6,"span",5),m(7),l(),c(8,"label",6),m(9," \xA0> "),l()(),c(10,"form",7),x("submit",function(s){return p(i),f(n.onSubmit(s))}),c(11,"button",8),m(12," \u2630 "),l(),c(13,"input",9,0),x("focus",function(){p(i);let s=w(14);return f(s.setAttribute("isfocus","true"))})("blur",function(){p(i);let s=w(14);return f(s.setAttribute("isfocus","false"))})("focus",function(){p(i);let s=w(14);return f(s.select())})("keydown",function(s){return p(i),f(n.onKeydown(s))}),l()()()(),c(15,"section",10),C(16,X,16,2,"details",11,y),l()()}t&2&&(h(7),F(n.cwd),h(9),S(n.reverseTerminal()))},dependencies:[R,Q,N],styles:['@charset "UTF-8";input[_ngcontent-%COMP%]{outline:0;border-width:0}input[_ngcontent-%COMP%]:focus{border-color:green;border-bottom-width:2px;border-bottom-style:solid;outline:1px dotted #000}.suggest[_ngcontent-%COMP%]{padding-inline:.1rem}.terminal[_ngcontent-%COMP%]   details[_ngcontent-%COMP%] > summary[_ngcontent-%COMP%]{list-style-type:"\\268a";color:#fff}.terminal[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%] > summary[_ngcontent-%COMP%]{list-style-type:"\\2b9f";color:#fff}.terminal[_ngcontent-%COMP%]   .value[mode=result][_ngcontent-%COMP%]:before{content:"$";color:#0f0}.terminal[_ngcontent-%COMP%]   .value[mode=error][_ngcontent-%COMP%]:before{content:"#";color:red}.terminal[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]:before{margin-inline-end:.5rem;font-weight:bolder}']});let a=r;return a})();export{me as Terminal2Component};
