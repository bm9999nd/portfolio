import{a as O}from"./chunk-WUAGMEY2.js";import{$a as k,Gb as j,Hb as M,Ma as l,Na as b,Za as v,aa as T,bb as E,d as m,db as p,dc as A,eb as S,fb as V,gb as F,hb as r,ia as C,ib as _,ja as u,jb as y,nb as h,oa as g,ob as f,pa as D,pb as s,rc as P,yb as o,zb as I}from"./chunk-TKQFSGRA.js";var $=()=>({display:"inline-block",transform:"rotate(180deg)"});function U(t,i){if(t&1){let e=h();r(0,"button",1),f("click",function(){C(e);let n=s();return u(n.permit.track())}),o(1," Device Permission "),_()}}function q(t,i){t&1&&o(0,"\u{1F507}")}function B(t,i){t&1&&o(0,"\u{1F3A4}")}function N(t,i){if(t&1&&v(0,q,1,0)(1,B,1,0),t&2){let e=s().$implicit;p(0,e.muted?1:0)}}function R(t,i){t&1&&o(0,"\u{1F4F5}")}function z(t,i){t&1&&o(0,"\u{1F4F8}")}function G(t,i){if(t&1&&v(0,R,1,0)(1,z,1,0),t&2){let e=s().$implicit;p(0,e.muted?1:0)}}function H(t,i){if(t&1){let e=h();r(0,"div",3)(1,"button",4),f("click",function(){let n=C(e).$implicit,c=s(3);return u(c.startTrack(n))}),r(2,"span"),v(3,N,2,1)(4,G,2,1),_(),o(5," \xA0 "),r(6,"span"),o(7),_()()()}if(t&2){let e=i.$implicit;l(),k("name",e.id)("title",e.label),l(2),p(3,e.kind=="audio"&&!e.muted?3:-1),l(),p(4,e.kind=="video"&&!e.muted?4:-1),l(3),I(e.label)}}function J(t,i){if(t&1){let e=h();r(0,"button",2),f("click",function(){C(e);let n=s(2);return u(n.tracks=void 0)}),r(1,"span"),o(2," \u2794 "),_(),o(3," \xA0 "),r(4,"span"),o(5," Select Camera to Projecting "),_()(),y(6,"br")(7,"br"),V(8,H,8,5,"div",3,S)}if(t&2){let e=s(2);l(),E(M(2,$)),l(7),F(e.tracks)}}function K(t,i){if(t&1){let e=h();r(0,"div",5)(1,"div",6)(2,"video",7,0),f("canplay",function(n){C(e);let c=s(2);return u(c.videoCanPlay(n))}),_()(),r(4,"div",8)(5,"button",9),f("click",function(){C(e);let n=s(2);return u(n.stopTrack())}),y(6,"i",10),r(7,"span"),o(8,"\u{1F7E5}"),_()()()()}if(t&2){let e=s(2);l(2),k("srcObject",e.lastStream)}}function L(t,i){if(t&1&&v(0,J,10,3)(1,K,9,1),t&2){let e=s();p(0,e.lastStream===void 0?0:1)}}var it=(()=>{let i=class i{constructor(a,n,c){this.document=a,this.nav=n,this.el=c,this.activated=new D,this.window=this.document.defaultView,this.permit={screen:()=>m(this,null,function*(){this.screenCast=yield this.devices.getDisplayMedia()}),media:()=>m(this,null,function*(){let d=yield this.devices.enumerateDevices(),x=[];d.forEach(w=>{w.kind.includes("video")&&x.push(w)}),this.media=x}),track:()=>m(this,null,function*(){let d=yield this.devices.getUserMedia({video:!0});this.tracks=d.getTracks(),this.tracks.forEach(x=>{x.stop()})})}}ngAfterViewInit(){return m(this,null,function*(){if(!this.nav.isBrowser)return;let a=this.el.nativeElement;this.videoEl=a.querySelector("video"),this.devices=this.window.navigator.mediaDevices})}startTrack(a){return m(this,null,function*(){let n=a.getConstraints(),c=a.getSettings(),d=a.getCapabilities(),x=n.deviceId;this.lastStream=yield this.devices.getUserMedia({video:{deviceId:a.id}})})}videoCanPlay(a){this.videoEl=a.target,this.activated.emit({video:this.videoEl,status:!0})}stopTrack(){return m(this,null,function*(){this.lastStream.getTracks()[0].stop(),this.lastStream=void 0,this.videoEl=this.el.nativeElement.querySelector("video"),this.activated.emit({video:this.videoEl,status:!1})})}};i.\u0275fac=function(n){return new(n||i)(b(A),b(O),b(g))},i.\u0275cmp=T({type:i,selectors:[["api-camera"]],outputs:{activated:"activated"},standalone:!0,features:[j],decls:2,vars:1,consts:[["cam",""],["type","button","name","permission","title","Ask Device Permission",1,"btn","btn-primary",3,"click"],["type","button","name","back","title","back",1,"btn",3,"click"],[1,"mb-3"],["type","button",1,"btn","btn-lg",3,"click","name","title"],[1,"position-relative"],[1,"rounded"],["autoplay","","loop","","muted","",3,"canplay","srcObject"],[1,"d-flex","justify-content-center"],["type","button","name","stop","title","stop",1,"btn",3,"click"],[1,"bi","bi-stop-fill"]],template:function(n,c){if(n&1&&v(0,U,2,0)(1,L,2,1),n&2){let d;p(0,(d=c.tracks!=null)?d===!0?1:-1:0)}},dependencies:[P]});let t=i;return t})();export{it as a};
