import{$a as g,Ia as r,Ja as k,Rb as F,Ua as f,Wa as s,Wb as j,Xb as D,Yb as M,Z as y,Za as c,Zb as O,_a as o,_b as N,ab as d,bb as p,d as u,db as b,dc as B,ea as v,eb as x,fa as C,fb as _,ic as U,ka as E,ob as m,pb as T,qb as S,tb as I,yb as V}from"./chunk-B23K2YXN.js";var $=(t,a,e,i)=>({"bi-mic":t,"bi-mic-mute":a,"bi-camera-video":e,"bi-camera-video-off":i});function A(t,a){if(t&1){let e=b();d(0),c(1,"div",4)(2,"button",5),x("click",function(){v(e);let n=_();return C(n.permit.track())}),m(3," Ask Device Permission "),o()(),p()}}function P(t,a){if(t&1){let e=b();d(0),c(1,"div",11)(2,"button",12),x("click",function(){let n=v(e).$implicit,l=_(3);return C(l.startTrack(n))}),g(3,"i",13),c(4,"span",14),m(5),o()()(),p()}if(t&2){let e=a.$implicit;r(2),s("name",e.id)("title",e.label),r(),s("ngClass",V(4,$,e.kind=="audio"&&!e.muted,e.kind=="audio"&&e.muted,e.kind=="video"&&!e.muted,e.kind=="video"&&e.muted)),r(2),T(e.label)}}function q(t,a){if(t&1){let e=b();d(0),c(1,"div",7)(2,"div",8)(3,"button",9),x("click",function(){v(e);let n=_(2);return C(n.tracks=void 0)}),g(4,"i",10),o()(),f(5,P,6,9,"ng-container",3),o(),p()}if(t&2){let e=_(2);r(5),s("ngForOf",e.tracks)("ngForTrackBy",e.tracker)}}function K(t,a){if(t&1){let e=b();d(0),c(1,"div",15)(2,"div",16),g(3,"video",17),o(),c(4,"div",18)(5,"button",19),x("click",function(){v(e);let n=_(2);return C(n.stopTrack())}),g(6,"i",20),o()()(),p()}if(t&2){let e=_(2);r(3),s("srcObject",e.lastStream)}}function L(t,a){if(t&1&&(d(0),f(1,q,6,2,"ng-container",6)(2,K,7,1,"ng-container",6),p()),t&2){let e=_();r(),s("ngIf",e.lastStream===void 0),r(),s("ngIf",e.lastStream!==void 0)}}function R(t,a){if(t&1&&(d(0),c(1,"div",21)(2,"div",22)(3,"span",23),m(4,"Kind"),o(),c(5,"span",14),m(6),o()(),c(7,"div",22)(8,"span",23),m(9,"Id"),o(),c(10,"span",14),m(11),o()(),c(12,"div",22)(13,"span",23),m(14,"Label"),o(),c(15,"span",14),m(16),o()()(),p()),t&2){let e=a.$implicit;r(6),S(": ",e.kind,""),r(5),S(": ",e.deviceId,""),r(5),S(": ",e.label,"")}}var Q=(()=>{let a=class a{constructor(i,n,l){this.document=i,this.nav=n,this.el=l,this.window=this.document.defaultView,this.permit={screen:()=>u(this,null,function*(){this.screenCast=yield this.devices.getDisplayMedia()}),media:()=>u(this,null,function*(){this.media=yield this.devices.enumerateDevices()}),track:()=>u(this,null,function*(){let w=yield this.devices.getUserMedia({video:!0,audio:!0});this.tracks=w.getTracks(),this.tracks.forEach(h=>{h.stop()})})}}ngOnInit(){return u(this,null,function*(){if(!this.nav.isBrowser)return;let i=this.el.nativeElement;this.videoEl=i.querySelector("video"),this.devices=this.window.navigator.mediaDevices})}startTrack(i){return u(this,null,function*(){let n=i.getConstraints(),l=i.getSettings(),w=i.getCapabilities(),h=n.deviceId;this.lastStream=yield this.devices.getUserMedia({video:{deviceId:i.id}})})}stopTrack(){return u(this,null,function*(){this.lastStream.getTracks()[0].stop(),this.lastStream=void 0})}tracker(i,n){return n}};a.\u0275fac=function(n){return new(n||a)(k(F),k(U),k(E))},a.\u0275cmp=y({type:a,selectors:[["api-camera"]],standalone:!0,features:[I],decls:8,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-none"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"justify-content-center","d-flex"],["type","button","name","permission","title","Ask Device Permission",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"mb-3","row","mx-0","align-items-baseline","justify-content-center"],[1,"col-auto","col-sm-1"],["type","button","name","back","title","back",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"col-sm-3","col-md-4"],[1,"btn","hover","text-truncate","w-100","rounded-0","border-warning","border-0","border-bottom","border-2",3,"click","name","title"],[1,"bi","me-3",3,"ngClass"],[1,"col"],[1,"position-relative"],[1,"rounded"],["autoplay","","loop","","muted","",3,"srcObject"],[1,"d-flex","justify-content-center"],["type","button","name","stop","title","stop",1,"btn","btn-danger",3,"click"],[1,"bi","bi-stop-fill"],[1,"mb-3"],[1,"row"],[1,"col-1"]],template:function(n,l){n&1&&(g(0,"br"),d(1,0),f(2,A,4,0,"ng-container",1)(3,L,3,2,"ng-container",1),p(),c(4,"div",2)(5,"h1"),m(6,"Media Info :"),o(),f(7,R,17,3,"ng-container",3),o()),n&2&&(r(),s("ngSwitch",l.tracks!=null),r(),s("ngSwitchCase",!1),r(),s("ngSwitchCase",!0),r(4),s("ngForOf",l.media)("ngForTrackBy",l.tracker))},dependencies:[B,j,D,M,O,N]});let t=a;return t})();export{Q as a};
